{% extends 'Api/view/layout.html.twig' %}

{% block body %}
<h1>Edytuj artykuł</h1>
{% if article.id %}
<form id="upload" role="form" action="{{ url('edit_article', {'id' : article.id}) }}" method="POST"  
      enctype="multipart/form-data">
    {% else %}
    <form id="upload" role="form" action="{{ url('new_article') }}" method="POST" enctype="multipart/form-data">
        {% endif %}
        <div class="form-group">
            <label for="name">Tytuł</label>
            <input type="text" class="form-control" id="url" name="title"
                   value="{% if(article.title) %}{{ article.title }}{% endif %}">
        </div>
        <div class="form-group">
            <label for="pwd">Kategoria:</label>
            <input type="text" class="form-control" id="catId" name="catId"
                   value="{% if(article.cat_id) %}{{ article.cat_id }}{% endif %}">
        </div>
        
        <div class="form-group">
            <label for="content">Opis:</label>
            <textarea class="form-control"
                      name="content">{% if(article.content) %}{{ article.content }}{% endif %}</textarea>
        </div>
    {#<fieldset>
        
                <div class="file-input file-input-new"><div class="file-preview ">
    <div class="close fileinput-remove">×</div>
    <div class="file-drop-disabled">
    <div class="file-preview-thumbnails">
    </div>
    <div class="clearfix"></div>    <div class="file-preview-status text-center text-success"></div>
    <div class="kv-fileinput-error file-error-message" style="display: none;"></div>
    </div>
</div>
<div class="kv-upload-progress hide"><div class="progress">
    <div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%;">
        0%
     </div>
</div></div>
<div class="input-group file-caption-main">
   <div tabindex="500" class="form-control file-caption  kv-fileinput-caption">
   <div class="file-caption-name"></div>
</div>

   <div class="input-group-btn">
       <button type="button" tabindex="500" title="Clear selected files" class="btn btn-default fileinput-remove fileinput-remove-button"><i class="glyphicon glyphicon-trash"></i>  <span class="hidden-xs">Remove</span></button>
       <button type="button" tabindex="500" title="Abort ongoing upload" class="btn btn-default hide fileinput-cancel fileinput-cancel-button"><i class="glyphicon glyphicon-ban-circle"></i>  <span class="hidden-xs">Cancel</span></button>
       <button type="submit" tabindex="500" title="Upload selected files" class="btn btn-default fileinput-upload fileinput-upload-button"><i class="glyphicon glyphicon-upload"></i>  <span class="hidden-xs">Upload</span></button>
       <div tabindex="500" class="btn btn-primary btn-file"><i class="glyphicon glyphicon-folder-open"></i>&nbsp;  <span class="hidden-xs">Browse …</span><input id="file-0a" class="file" type="file" multiple="" data-min-file-count="1"></div>
   </div>
</div></div>
        </fieldset>
                <br>
                <button type="submit" class="btn btn-primary" name="submit">Submit</button>
                <button type="reset" class="btn btn-default">Reset</button>
            #}
        <fieldset>
            <div>                
                {% if article.image != null %}
                    <td><img src="http://localhost/mvc2/src/Api/public/img/{{ article.image }}"></td>
                {% endif %}
                </div>
            <div>
                <label for="input-id">Wybierz zdjecie:</label>
                <input id="input-id" type="file" class="file"  name="image" data-preview-file-type="text"  multiple="multiple" 
                value="
                {% if(article.image) %}{{ article.image }} {% endif %}">
               
            </div>
        </fieldset>
        <div class="form-group">
            <button type="submit" class="btn btn-default" name="submit">Zapisz</button>
        </div>
    </form>
    <ul>
        <li>
            <a href="{{ url('articles') }}">Powrót do listy</a>
        </li>
    </ul>
    {% endblock %}
{% block javascript %}
<script>
    $("#input-id").fileinput({'showUpload':true, 'previewFileType':'any'});
</script>
{% endblock %}